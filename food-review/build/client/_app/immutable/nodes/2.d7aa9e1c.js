import{i as Le,f as Pe,h as ae,j as De,r as he,s as Q,n as V,o as je,b as de,k as pe,l as ve,m as xe}from"../chunks/scheduler.2a58b43e.js";import{p as ce,t as G,b as ue,d as q,S as Y,i as Z,g as m,s as L,h as g,j as y,y as F,c as P,f as p,k as d,a as U,x as u,z as ee,A as W,B as Ae,C as ye,m as z,n as X,o as K,e as _e,D as me,r as te,u as le,v as se,w as ne}from"../chunks/index.89bdd15f.js";import{w as Re}from"../chunks/index.f8d0adc9.js";function re(a,e){const l=e.token={};function t(o,i,s,n){if(e.token!==l)return;e.resolved=n;let r=e.ctx;s!==void 0&&(r=r.slice(),r[s]=n);const c=o&&(e.current=o)(r);let f=!1;e.block&&(e.blocks?e.blocks.forEach((E,b)=>{b!==i&&E&&(ce(),G(E,1,1,()=>{e.blocks[b]===E&&(e.blocks[b]=null)}),ue())}):e.block.d(1),c.c(),q(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[i]=c),f&&De()}if(Le(a)){const o=Pe();if(a.then(i=>{ae(o),t(e.then,1,e.value,i),ae(null)},i=>{if(ae(o),t(e.catch,2,e.error,i),ae(null),!e.hasCatch)throw i}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,a),!0;e.resolved=a}}function Te(a,e,l){const t=e.slice(),{resolved:o}=a;a.current===a.then&&(t[a.value]=o),a.current===a.catch&&(t[a.error]=o),a.block.p(t,l)}function oe(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function Me(a,e){a.d(1),e.delete(a.key)}function Ue(a,e,l,t,o,i,s,n,r,c,f,E){let b=a.length,_=i.length,v=b;const $={};for(;v--;)$[a[v].key]=v;const h=[],I=new Map,S=new Map,R=[];for(v=_;v--;){const k=E(o,i,v),T=l(k);let D=s.get(T);D?t&&R.push(()=>D.p(k,e)):(D=c(T,k),D.c()),I.set(T,h[v]=D),T in $&&S.set(T,Math.abs(v-$[T]))}const A=new Set,N=new Set;function j(k){q(k,1),k.m(n,f),s.set(k.key,k),f=k.first,_--}for(;b&&_;){const k=h[_-1],T=a[b-1],D=k.key,B=T.key;k===T?(f=k.first,b--,_--):I.has(B)?!s.has(D)||A.has(D)?j(k):N.has(B)?b--:S.get(D)>S.get(B)?(N.add(D),j(k)):(A.add(B),b--):(r(T,s),b--)}for(;b--;){const k=a[b];I.has(k.key)||r(k,s)}for(;_;)j(h[_-1]);return he(R),h}const ie=Re({photos:[],infos:[]}),fe=Re({});function Ne(a){let e,l,t,o,i="Title:",s,n,r,c,f,E="Description:",b,_,v,$,h,I="Upload Image:",S,R,A,N,j="Submit",k,T,D,B;return{c(){e=m("div"),l=m("form"),t=m("div"),o=m("label"),o.textContent=i,s=L(),n=m("input"),r=L(),c=m("div"),f=m("label"),f.textContent=E,b=L(),_=m("textarea"),v=L(),$=m("div"),h=m("label"),h.textContent=I,S=L(),R=m("input"),A=L(),N=m("button"),N.textContent=j,k=L(),T=m("div"),this.h()},l(M){e=g(M,"DIV",{class:!0});var C=y(e);l=g(C,"FORM",{id:!0});var w=y(l);t=g(w,"DIV",{class:!0});var H=y(t);o=g(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(o)!=="svelte-kpfkpc"&&(o.textContent=i),s=P(H),n=g(H,"INPUT",{id:!0,class:!0}),H.forEach(p),r=P(w),c=g(w,"DIV",{class:!0});var x=y(c);f=g(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(f)!=="svelte-yzlbq7"&&(f.textContent=E),b=P(x),_=g(x,"TEXTAREA",{id:!0,class:!0}),y(_).forEach(p),x.forEach(p),v=P(w),$=g(w,"DIV",{class:!0});var J=y($);h=g(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(h)!=="svelte-1m41r27"&&(h.textContent=I),S=P(J),R=g(J,"INPUT",{type:!0,id:!0,class:!0}),J.forEach(p),A=P(w),N=g(w,"BUTTON",{type:!0,id:!0,"data-svelte-h":!0}),F(N)!=="svelte-1wgguaz"&&(N.textContent=j),w.forEach(p),k=P(C),T=g(C,"DIV",{id:!0}),y(T).forEach(p),C.forEach(p),this.h()},h(){d(o,"for","title"),d(o,"class","svelte-13a1nx8"),d(n,"id","title"),d(n,"class","svelte-13a1nx8"),d(t,"class","form-control svelte-13a1nx8"),d(f,"for","desc"),d(f,"class","svelte-13a1nx8"),d(_,"id","desc"),d(_,"class","svelte-13a1nx8"),d(c,"class","form-control svelte-13a1nx8"),d(h,"for","image"),d(h,"class","svelte-13a1nx8"),d(R,"type","file"),d(R,"id","imageInput"),d(R,"class","svelte-13a1nx8"),d($,"class","form-control svelte-13a1nx8"),d(N,"type","submit"),d(N,"id","submitBtn"),d(l,"id","uploadForm"),d(T,"id","uploadStatus"),d(e,"class","form-container svelte-13a1nx8")},m(M,C){U(M,e,C),u(e,l),u(l,t),u(t,o),u(t,s),u(t,n),ee(n,a[0]),u(l,r),u(l,c),u(c,f),u(c,b),u(c,_),ee(_,a[1]),u(l,v),u(l,$),u($,h),u($,S),u($,R),u(l,A),u(l,N),u(e,k),u(e,T),D||(B=[W(n,"input",a[4]),W(_,"input",a[5]),W(R,"change",a[6]),W(l,"submit",Ae(a[3]))],D=!0)},p(M,[C]){C&1&&n.value!==M[0]&&ee(n,M[0]),C&2&&ee(_,M[1])},i:V,o:V,d(M){M&&p(e),D=!1,he(B)}}}function Se(a,e,l){let t="",o="",i=[];const s=async f=>{f.preventDefault();const E=new FormData;E.append("title",t),E.append("description",o),E.append("image",i[0]);try{await fetch("http://localhost:4000/photos",{method:"POST",body:E});const _=await(await fetch("http://localhost:4000/photos")).json(),$=await(await fetch("http://localhost:4002/photos")).json();ie.update(h=>({...h,photos:_,infos:$})),l(0,t=""),l(1,o=""),document.getElementById("uploadStatus").innerText="Upload successful!"}catch(b){console.error("Error:",b)}};function n(){t=this.value,l(0,t)}function r(){o=this.value,l(1,o)}function c(){i=this.files,l(2,i)}return[t,o,i,s,n,r,c]}class Ve extends Y{constructor(e){super(),Z(this,e,Se,Ne,Q,{})}}function ge(a,e,l){const t=a.slice();return t[7]=e[l],t}function be(a){let e,l=a[7]<=a[1]?"‚≠ê":"‚òÜ",t,o,i,s;function n(){return a[6](a[7])}return{c(){e=m("button"),t=z(l),o=L(),this.h()},l(r){e=g(r,"BUTTON",{type:!0,class:!0});var c=y(e);t=X(c,l),o=P(c),c.forEach(p),this.h()},h(){d(e,"type","button"),d(e,"class","star svelte-5wo2q9")},m(r,c){U(r,e,c),u(e,t),u(e,o),i||(s=W(e,"click",n),i=!0)},p(r,c){a=r,c&2&&l!==(l=a[7]<=a[1]?"‚≠ê":"‚òÜ")&&K(t,l)},d(r){r&&p(e),i=!1,s()}}}function Fe(a){let e,l,t,o,i,s,n,r,c="Add Review",f,E,b=oe([1,2,3,4,5]),_=[];for(let v=0;v<5;v+=1)_[v]=be(ge(a,b,v));return{c(){e=m("div"),l=m("form"),t=m("div"),o=m("textarea"),i=L(),s=m("div");for(let v=0;v<5;v+=1)_[v].c();n=L(),r=m("button"),r.textContent=c,this.h()},l(v){e=g(v,"DIV",{class:!0});var $=y(e);l=g($,"FORM",{});var h=y(l);t=g(h,"DIV",{class:!0});var I=y(t);o=g(I,"TEXTAREA",{placeholder:!0,class:!0}),y(o).forEach(p),I.forEach(p),i=P(h),s=g(h,"DIV",{class:!0});var S=y(s);for(let R=0;R<5;R+=1)_[R].l(S);S.forEach(p),n=P(h),r=g(h,"BUTTON",{class:!0,"data-svelte-h":!0}),F(r)!=="svelte-7zxfnz"&&(r.textContent=c),h.forEach(p),$.forEach(p),this.h()},h(){d(o,"placeholder","Write your review here..."),d(o,"class","svelte-5wo2q9"),d(t,"class","review-content"),d(s,"class","rating svelte-5wo2q9"),d(r,"class","submit-btn svelte-5wo2q9"),d(e,"class","review-container svelte-5wo2q9")},m(v,$){U(v,e,$),u(e,l),u(l,t),u(t,o),ee(o,a[0]),u(l,i),u(l,s);for(let h=0;h<5;h+=1)_[h]&&_[h].m(s,null);u(l,n),u(l,r),f||(E=[W(o,"input",a[5]),W(l,"submit",a[3])],f=!0)},p(v,[$]){if($&1&&ee(o,v[0]),$&6){b=oe([1,2,3,4,5]);let h;for(h=0;h<5;h+=1){const I=ge(v,b,h);_[h]?_[h].p(I,$):(_[h]=be(I),_[h].c(),_[h].m(s,null))}for(;h<5;h+=1)_[h].d(1)}},i:V,o:V,d(v){v&&p(e),ye(_,v),f=!1,he(E)}}}function He(a,e,l){let{photoId:t}=e,o="",i=0;const s=f=>{l(1,i=f)},n=async f=>{f.preventDefault(),await fetch(`http://localhost:4001/photos/${t}/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o,rating:i})});const b=await(await fetch(`http://localhost:4001/photos/${t}/reviews`)).json();ie.update(_=>(_.infos&&_.infos[t]&&(_.infos[t].reviews=b.reviews),_)),fe.update(_=>{const v={..._};return v[t]=b.averageRating,v}),l(0,o="")};function r(){o=this.value,l(0,o)}const c=f=>s(f);return a.$$set=f=>{"photoId"in f&&l(4,t=f.photoId)},[o,i,s,n,t,r,c]}class qe extends Y{constructor(e){super(),Z(this,e,He,Fe,Q,{photoId:4})}}function we(a,e,l){const t=a.slice();return t[5]=e[l],t}function ke(a){let e,l,t=a[5].id+"",o,i;return{c(){e=m("p"),l=z("Successfully deleted "),o=z(t),i=z("! Loading...")},l(s){e=g(s,"P",{});var n=y(e);l=X(n,"Successfully deleted "),o=X(n,t),i=X(n,"! Loading..."),n.forEach(p)},m(s,n){U(s,e,n),u(e,l),u(e,o),u(e,i)},p(s,n){n&1&&t!==(t=s[5].id+"")&&K(o,t)},d(s){s&&p(e)}}}function Ce(a,e){let l,t,o=e[5].content+"",i,s,n,r,c=e[5].id+"",f,E,b,_,v=e[5].rating+"",$,h,I,S,R,A="Edit",N,j,k="Delete",T,D,B,M;function C(){return e[4](e[5])}let w=e[2]===e[5].id&&ke(e);return{key:a,first:null,c(){l=m("li"),t=m("div"),i=z(o),s=L(),n=m("div"),r=z("- User "),f=z(c),E=L(),b=m("span"),_=z(" Rated: "),$=z(v),h=z(`/5
				`),I=m("span"),S=L(),R=m("button"),R.textContent=A,N=L(),j=m("button"),j.textContent=k,T=L(),w&&w.c(),D=L(),this.h()},l(H){l=g(H,"LI",{class:!0});var x=y(l);t=g(x,"DIV",{class:!0});var J=y(t);i=X(J,o),J.forEach(p),s=P(x),n=g(x,"DIV",{class:!0});var O=y(n);r=X(O,"- User "),f=X(O,c),E=P(O),b=g(O,"SPAN",{class:!0}),y(b).forEach(p),_=X(O," Rated: "),$=X(O,v),h=X(O,`/5
				`),I=g(O,"SPAN",{class:!0}),y(I).forEach(p),S=P(O),R=g(O,"BUTTON",{class:!0,"data-svelte-h":!0}),F(R)!=="svelte-163rahe"&&(R.textContent=A),N=P(O),j=g(O,"BUTTON",{class:!0,"data-svelte-h":!0}),F(j)!=="svelte-1ji20x2"&&(j.textContent=k),T=P(O),w&&w.l(O),O.forEach(p),D=P(x),x.forEach(p),this.h()},h(){d(t,"class","review-content svelte-jeccma"),d(b,"class","spacer svelte-jeccma"),d(I,"class","spacer svelte-jeccma"),d(R,"class","submit-btn svelte-jeccma"),d(j,"class","submit-btn svelte-jeccma"),d(n,"class","reviewer svelte-jeccma"),d(l,"class","review svelte-jeccma"),this.first=l},m(H,x){U(H,l,x),u(l,t),u(t,i),u(l,s),u(l,n),u(n,r),u(n,f),u(n,E),u(n,b),u(n,_),u(n,$),u(n,h),u(n,I),u(n,S),u(n,R),u(n,N),u(n,j),u(n,T),w&&w.m(n,null),u(l,D),B||(M=W(j,"click",C),B=!0)},p(H,x){e=H,x&1&&o!==(o=e[5].content+"")&&K(i,o),x&1&&c!==(c=e[5].id+"")&&K(f,c),x&1&&v!==(v=e[5].rating+"")&&K($,v),e[2]===e[5].id?w?w.p(e,x):(w=ke(e),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},d(H){H&&p(l),w&&w.d(),B=!1,M()}}}function Be(a){let e,l=[],t=new Map,o=oe(a[0]);const i=s=>s[5].id;for(let s=0;s<o.length;s+=1){let n=we(a,o,s),r=i(n);t.set(r,l[s]=Ce(r,n))}return{c(){e=m("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=g(s,"UL",{class:!0});var n=y(e);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(p),this.h()},h(){d(e,"class","reviews svelte-jeccma")},m(s,n){U(s,e,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(s,[n]){n&15&&(o=oe(s[0]),l=Ue(l,n,i,1,s,o,t,e,Me,Ce,null,we))},i:V,o:V,d(s){s&&p(e);for(let n=0;n<l.length;n+=1)l[n].d()}}}function Oe(a,e,l){let{reviews:t=[]}=e,{photoId:o}=e,i;const s=async(r,c)=>{try{await fetch(`http://localhost:4002/delete?id=${r}&photoId=${c}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),l(2,i=r)}catch(f){console.error(f)}},n=r=>s(r.id,o);return a.$$set=r=>{"reviews"in r&&l(0,t=r.reviews),"photoId"in r&&l(1,o=r.photoId)},[t,o,i,s,n]}class ze extends Y{constructor(e){super(),Z(this,e,Oe,Be,Q,{reviews:0,photoId:1})}}function $e(a,e,l){const t=a.slice();return t[6]=e[l],t[7]=e,t[8]=l,t}function Xe(a){let e,l="Empty post. Perhaps post a new picture of your food? üßë‚Äçüç≥";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-1i57nq3"&&(e.textContent=l)},m(t,o){U(t,e,o)},p:V,i:V,o:V,d(t){t&&p(e)}}}function Ge(a){let e,l,t=oe(a[0]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Ie($e(a,t,s));const i=s=>G(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=_e()},l(s){for(let n=0;n<o.length;n+=1)o[n].l(s);e=_e()},m(s,n){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(s,n);U(s,e,n),l=!0},p(s,n){if(n&15){t=oe(s[0]);let r;for(r=0;r<t.length;r+=1){const c=$e(s,t,r);o[r]?(o[r].p(c,n),q(o[r],1)):(o[r]=Ie(c),o[r].c(),q(o[r],1),o[r].m(e.parentNode,e))}for(ce(),r=t.length;r<o.length;r+=1)i(r);ue()}},i(s){if(!l){for(let n=0;n<t.length;n+=1)q(o[n]);l=!0}},o(s){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)G(o[n]);l=!1},d(s){s&&p(e),ye(o,s)}}}function Je(a){let e,l="Error getting photo details";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-tzw1tk"&&(e.textContent=l)},m(t,o){U(t,e,o)},p:V,i:V,o:V,d(t){t&&p(e)}}}function We(a){let e,l=a[9].title+"",t,o,i,s=a[9].description+"",n,r,c,f,E,b,_,v,$,h,I,S,R,A,N,j,k={ctx:a,current:null,token:null,hasCatch:!0,pending:Ye,then:Qe,catch:Ke,value:10,error:11};re(v=a[3](a[6]._id),k);function T(C){a[4](C,a[6])}let D={};a[6]._id!==void 0&&(D.photoId=a[6]._id),I=new qe({props:D}),de.push(()=>me(I,"photoId",T));function B(C){a[5](C,a[6])}let M={reviews:a[9].reviews};return a[6]._id!==void 0&&(M.photoId=a[6]._id),A=new ze({props:M}),de.push(()=>me(A,"photoId",B)),{c(){e=m("h3"),t=z(l),o=L(),i=m("p"),n=z(s),r=L(),c=m("div"),f=m("img"),_=L(),k.block.c(),$=L(),h=m("div"),te(I.$$.fragment),R=L(),te(A.$$.fragment),this.h()},l(C){e=g(C,"H3",{});var w=y(e);t=X(w,l),w.forEach(p),o=P(C),i=g(C,"P",{});var H=y(i);n=X(H,s),H.forEach(p),r=P(C),c=g(C,"DIV",{class:!0});var x=y(c);f=g(x,"IMG",{src:!0,alt:!0,class:!0}),_=P(x),k.block.l(x),$=P(x),h=g(x,"DIV",{});var J=y(h);le(I.$$.fragment,J),R=P(J),le(A.$$.fragment,J),J.forEach(p),x.forEach(p),this.h()},h(){pe(f.src,E="http://localhost:4000/photos/"+a[6]._id)||d(f,"src",E),d(f,"alt",b=a[6].title),d(f,"class","svelte-h23jd2"),d(c,"class","flex svelte-h23jd2")},m(C,w){U(C,e,w),u(e,t),U(C,o,w),U(C,i,w),u(i,n),U(C,r,w),U(C,c,w),u(c,f),u(c,_),k.block.m(c,k.anchor=null),k.mount=()=>c,k.anchor=$,u(c,$),u(c,h),se(I,h,null),u(h,R),se(A,h,null),j=!0},p(C,w){a=C,(!j||w&3)&&l!==(l=a[9].title+"")&&K(t,l),(!j||w&3)&&s!==(s=a[9].description+"")&&K(n,s),(!j||w&1&&!pe(f.src,E="http://localhost:4000/photos/"+a[6]._id))&&d(f,"src",E),(!j||w&1&&b!==(b=a[6].title))&&d(f,"alt",b),k.ctx=a,w&1&&v!==(v=a[3](a[6]._id))&&re(v,k)||Te(k,a,w);const H={};!S&&w&1&&(S=!0,H.photoId=a[6]._id,ve(()=>S=!1)),I.$set(H);const x={};w&3&&(x.reviews=a[9].reviews),!N&&w&1&&(N=!0,x.photoId=a[6]._id,ve(()=>N=!1)),A.$set(x)},i(C){j||(q(I.$$.fragment,C),q(A.$$.fragment,C),j=!0)},o(C){G(I.$$.fragment,C),G(A.$$.fragment,C),j=!1},d(C){C&&(p(e),p(o),p(i),p(r),p(c)),k.block.d(),k.token=null,k=null,ne(I),ne(A)}}}function Ke(a){let e,l="Error loading ratings";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-ag3qao"&&(e.textContent=l)},m(t,o){U(t,e,o)},p:V,d(t){t&&p(e)}}}function Qe(a){let e,l,t=a[2][a[6]._id]+"",o;return{c(){e=m("p"),l=z("Average Rating: "),o=z(t)},l(i){e=g(i,"P",{});var s=y(e);l=X(s,"Average Rating: "),o=X(s,t),s.forEach(p)},m(i,s){U(i,e,s),u(e,l),u(e,o)},p(i,s){s&5&&t!==(t=i[2][i[6]._id]+"")&&K(o,t)},d(i){i&&p(e)}}}function Ye(a){let e,l="Loading ratings...";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-p8tsjc"&&(e.textContent=l)},m(t,o){U(t,e,o)},p:V,d(t){t&&p(e)}}}function Ze(a){let e,l="Loading...";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-qdsr2u"&&(e.textContent=l)},m(t,o){U(t,e,o)},p:V,i:V,o:V,d(t){t&&p(e)}}}function Ie(a){let e,l,t,o,i={ctx:a,current:null,token:null,hasCatch:!0,pending:Ze,then:We,catch:Je,value:9,error:11,blocks:[,,,]};return re(e=a[1][a[6]._id],i),{c(){i.block.c(),l=L(),t=m("hr"),this.h()},l(s){i.block.l(s),l=P(s),t=g(s,"HR",{class:!0}),this.h()},h(){d(t,"class","svelte-h23jd2")},m(s,n){i.block.m(s,i.anchor=n),i.mount=()=>l.parentNode,i.anchor=l,U(s,l,n),U(s,t,n),o=!0},p(s,n){a=s,i.ctx=a,n&3&&e!==(e=a[1][a[6]._id])&&re(e,i)||Te(i,a,n)},i(s){o||(q(i.block),o=!0)},o(s){for(let n=0;n<3;n+=1){const r=i.blocks[n];G(r)}o=!1},d(s){s&&(p(l),p(t)),i.block.d(s),i.token=null,i=null}}}function et(a){let e,l,t,o;const i=[Ge,Xe],s=[];function n(r,c){return r[0].length?0:1}return l=n(a),t=s[l]=i[l](a),{c(){e=m("div"),t.c()},l(r){e=g(r,"DIV",{});var c=y(e);t.l(c),c.forEach(p)},m(r,c){U(r,e,c),s[l].m(e,null),o=!0},p(r,[c]){let f=l;l=n(r),l===f?s[l].p(r,c):(ce(),G(s[f],1,1,()=>{s[f]=null}),ue(),t=s[l],t?t.p(r,c):(t=s[l]=i[l](r),t.c()),q(t,1),t.m(e,null))},i(r){o||(q(t),o=!0)},o(r){G(t),o=!1},d(r){r&&p(e),s[l].d()}}}function tt(a,e,l){let t=[],o=[],i={};ie.subscribe(c=>{l(0,t=c.photos),l(1,o=c.infos)}),fe.subscribe(c=>{l(2,i=c)});async function s(c){const E=await(await fetch(`http://localhost:4001/photos/${c}/reviews`)).json();fe.update(b=>(b[c]=E.averageRating,b))}je(async()=>{const f=await(await fetch("http://localhost:4000/photos")).json(),b=await(await fetch("http://localhost:4002/photos")).json();ie.set({photos:f,infos:b})});function n(c,f){a.$$.not_equal(f._id,c)&&(f._id=c,l(0,t))}function r(c,f){a.$$.not_equal(f._id,c)&&(f._id=c,l(0,t))}return[t,o,i,s,n,r]}class lt extends Y{constructor(e){super(),Z(this,e,tt,et,Q,{})}}const st=""+new URL("../assets/UMass_Amherst_Athletics_logo.2b5d704b.png",import.meta.url).href;function nt(a){let e,l,t=`<img src="${st}" alt="UMass Food Reviews" class="logo-img svelte-1gbkc03"/>`,o,i,s,n,r='<h class="title svelte-1gbkc03">UMass Food Review</h>',c,f,E='<a href="/" class="svelte-1gbkc03">Home</a>',b,_,v,$="Create",h,I,S='<a href="/about" class="svelte-1gbkc03">About</a>',R,A,N='<a href="/donate" class="svelte-1gbkc03">Donate</a>',j,k;return{c(){e=m("nav"),l=m("a"),l.innerHTML=t,o=L(),i=m("ul"),s=m("div"),n=m("li"),n.innerHTML=r,c=L(),f=m("li"),f.innerHTML=E,b=L(),_=m("li"),v=m("button"),v.textContent=$,h=L(),I=m("li"),I.innerHTML=S,R=L(),A=m("li"),A.innerHTML=N,this.h()},l(T){e=g(T,"NAV",{class:!0});var D=y(e);l=g(D,"A",{href:!0,class:!0,"data-svelte-h":!0}),F(l)!=="svelte-1ul27by"&&(l.innerHTML=t),o=P(D),i=g(D,"UL",{class:!0});var B=y(i);s=g(B,"DIV",{class:!0});var M=y(s);n=g(M,"LI",{class:!0,"data-svelte-h":!0}),F(n)!=="svelte-zebvt1"&&(n.innerHTML=r),c=P(M),f=g(M,"LI",{class:!0,"data-svelte-h":!0}),F(f)!=="svelte-1huopth"&&(f.innerHTML=E),b=P(M),_=g(M,"LI",{class:!0});var C=y(_);v=g(C,"BUTTON",{class:!0,"data-svelte-h":!0}),F(v)!=="svelte-xw9ep3"&&(v.textContent=$),C.forEach(p),h=P(M),I=g(M,"LI",{class:!0,"data-svelte-h":!0}),F(I)!=="svelte-1bc9el4"&&(I.innerHTML=S),R=P(M),A=g(M,"LI",{class:!0,"data-svelte-h":!0}),F(A)!=="svelte-sa8932"&&(A.innerHTML=N),M.forEach(p),B.forEach(p),D.forEach(p),this.h()},h(){d(l,"href","/"),d(l,"class","svelte-1gbkc03"),d(n,"class","svelte-1gbkc03"),d(f,"class","svelte-1gbkc03"),d(v,"class","nav-button svelte-1gbkc03"),d(_,"class","svelte-1gbkc03"),d(I,"class","svelte-1gbkc03"),d(A,"class","svelte-1gbkc03"),d(s,"class","nav-links svelte-1gbkc03"),d(i,"class","svelte-1gbkc03"),d(e,"class","main-nav svelte-1gbkc03")},m(T,D){U(T,e,D),u(e,l),u(e,o),u(e,i),u(i,s),u(s,n),u(s,c),u(s,f),u(s,b),u(s,_),u(_,v),u(s,h),u(s,I),u(s,R),u(s,A),j||(k=W(v,"click",function(){xe(a[0])&&a[0].apply(this,arguments)}),j=!0)},p(T,[D]){a=T},i:V,o:V,d(T){T&&p(e),j=!1,k()}}}function ot(a,e,l){let{togglePostForm:t}=e;return a.$$set=o=>{"togglePostForm"in o&&l(0,t=o.togglePostForm)},[t]}class at extends Y{constructor(e){super(),Z(this,e,ot,nt,Q,{togglePostForm:0})}}function Ee(a){let e,l,t="Create a post",o,i,s;return i=new Ve({}),{c(){e=m("div"),l=m("h2"),l.textContent=t,o=L(),te(i.$$.fragment),this.h()},l(n){e=g(n,"DIV",{class:!0});var r=y(e);l=g(r,"H2",{"data-svelte-h":!0}),F(l)!=="svelte-1gykm93"&&(l.textContent=t),o=P(r),le(i.$$.fragment,r),r.forEach(p),this.h()},h(){d(e,"class","post-form svelte-2lwe55")},m(n,r){U(n,e,r),u(e,l),u(e,o),se(i,e,null),s=!0},i(n){s||(q(i.$$.fragment,n),s=!0)},o(n){G(i.$$.fragment,n),s=!1},d(n){n&&p(e),ne(i)}}}function rt(a){let e,l,t,o,i;e=new at({props:{togglePostForm:a[1]}});let s=a[0]&&Ee();return o=new lt({}),{c(){te(e.$$.fragment),l=L(),s&&s.c(),t=L(),te(o.$$.fragment)},l(n){le(e.$$.fragment,n),l=P(n),s&&s.l(n),t=P(n),le(o.$$.fragment,n)},m(n,r){se(e,n,r),U(n,l,r),s&&s.m(n,r),U(n,t,r),se(o,n,r),i=!0},p(n,[r]){n[0]?s?r&1&&q(s,1):(s=Ee(),s.c(),q(s,1),s.m(t.parentNode,t)):s&&(ce(),G(s,1,1,()=>{s=null}),ue())},i(n){i||(q(e.$$.fragment,n),q(s),q(o.$$.fragment,n),i=!0)},o(n){G(e.$$.fragment,n),G(s),G(o.$$.fragment,n),i=!1},d(n){n&&(p(l),p(t)),ne(e,n),s&&s.d(n),ne(o,n)}}}function it(a,e,l){let t=!1;function o(){l(0,t=!t)}return[t,o]}class ct extends Y{constructor(e){super(),Z(this,e,it,rt,Q,{})}}function ut(a){let e,l;return e=new ct({}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){se(e,t,o),l=!0},p:V,i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}class pt extends Y{constructor(e){super(),Z(this,e,null,ut,Q,{})}}export{pt as component};
